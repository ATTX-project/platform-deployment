buildscript {
  repositories {
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    classpath "gradle.plugin.com.chrisgahlert:gradle-dcompose-plugin:0.8.2"
  }
}

plugins {
    id "de.undercouch.download" version "3.1.2"
//    id "com.chrisgahlert.gradle-dcompose-plugin" version "0.8.2"
}


apply plugin: "com.chrisgahlert.gradle-dcompose-plugin"

import de.undercouch.gradle.tasks.download.Download

task downloadJars(type:Download) {
    // TODO: Change this to use artifact repository
    src "${artifactRepoUrl}/job/wf-api/lastSuccessfulBuild/artifact/wf-API/build/distributions/wf-API-${version}.tar.gz"
    dest "$buildDir/docker/build/distributions/wf-API-${version}.tar.gz"

}

dcompose {

	registry ('http://attx-dev:5000') {
     	 // Needs no user/pass
 	 }

	'wf-api' {
	baseDir = file('.')
    	repository = 'attx-dev:5000/wf-api:latest'
	}
}
