apply plugin: 'base'

repositories {
      mavenCentral();
}

ext {
    imageRepo = "attx-dev"
    imageRepoPort = "5000"
    artifactRepoPort = "8081"
    jenkinsPort = "49001"
}

// TO BE REMOVED when moving to archiva
if(!project.hasProperty("jenkinsArtifactRepoURL")) {
    ext.jenkinsArtifactRepoURL = "http://${imageRepo}:${jenkinsPort}"
}

if (!project.hasProperty("registryURL")) {
    ext.registryURL = "http://${imageRepo}:${imageRepoPort}"
}

if (!project.hasProperty("artifactRepoURL")) {
    ext.artifactRepoURL = "http://${imageRepo}:${artifactRepoPort}/repository/attx-releases"
}

if (!project.hasProperty("artifactRepoUser")) {
    ext.artifactRepoUser = ""
}

if (!project.hasProperty("artifactRepoPassword")) {
    ext.artifactRepoPassword = ""
}

// TO DO: Figure out a smarter way to do the switch of environments

if (!project.hasProperty("env") || project.env == "dev") {

    ext.wfAPI               = "1.0-SNAPSHOT"
    ext.gmAPI               = "1.0-SNAPSHOT"
    ext.rdfINDEXER          = "1.0-SNAPSHOT"
    ext.attxMetadataPlugin  = "1.0-SNAPSHOT"
    ext.attxInfras2IPlugin  = "1.0-SNAPSHOT"
    ext.attxUploaderPlugin  = "1.0-SNAPSHOT"
    ext.attxAPICallerPlugin = "1.0-SNAPSHOT"
    ext.sirenAPIPlugin      = "1.0-SNAPSHOT"
    ext.imageES5            = "latest"
    ext.imageWF             = "latest"
    ext.imageGM             = "latest"
    ext.imageSirenAPIPlugin = "latest"
    ext.imageATTXDPUs       = "latest"
    ext.imageATTXShared     = "latest"
    ext.imageFuseki         = "latest"

} else if (project.env == "release"){

    ext.wfAPI               = "0.1"
    ext.gmAPI               = "0.1"
    ext.rdfINDEXER          = "0.1"
    ext.attxMetadataPlugin  = "1.0-SNAPSHOT"
    ext.attxInfras2IPlugin  = "1.0-SNAPSHOT"
    ext.attxUploaderPlugin  = "1.0-SNAPSHOT"
    ext.attxAPICallerPlugin = "1.0-SNAPSHOT"
    ext.sirenAPIPlugin      = "1.0-SNAPSHOT"
    ext.imageES5            = "latest"
    ext.imageWF             = "latest"
    ext.imageGM             = "latest"
    ext.imageSirenAPIPlugin = "latest"
    ext.imageATTXDPUs       = "latest"
    ext.imageATTXShared     = "latest"
    ext.imageFuseki         = "latest"

} else {
    throw new GradleException("Build project environment option not recognised.")
}

ext.unifiedViewsRepoURL = "http://repository.unifiedviews.eu/nexus/content/repositories/public/"